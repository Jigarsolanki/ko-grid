<!DOCTYPE html>
<html>
<head>
  <title>KO Grid</title>

  <script src="http://knockoutjs.com/downloads/knockout-3.0.0.js"></script>
  <script src="ko-grid.js"></script>
</head>
<body>
  <div id="grid-container" data-bind="grid: $data"></div>

  <script type="text/html" id="grid-template">

  <div class="grid">
    <div class="grid-row grid-row-header" data-bind="foreach: { data: columns, as: 'column' }">
      <span class="grid-cell grid-cell-header" data-bind="text: column.name"></span>
    </div>

    <!-- ko foreach: { data: data, as: 'row' } -->
    <div class="grid-row" data-bind="foreach: { data: $parent.columns, as: 'column' }">
      <span class="grid-cell" data-bind="text: row[column.name]"></span>
    </div>
    <!-- /ko -->
  </div>

  </script>

  <script type="application/javascript">

  document.addEventListener("DOMContentLoaded", function () {
    var i, data, grid, element;

    i = 1;
    data = ko.observableArray();
    grid = ko.grid(data, { 'name': 'text', 'count': 'link' });
    element = document.getElementById('grid-container');

    ko.applyBindings(grid, element);

    setInterval(function () {
      data.push({ name: ko.observable(i), count: ko.observable(i) });
      i += 1;
    }, 1000);

    setInterval(function () {
      var raw, index, element;

      raw = data.peek();
      index = Math.floor(Math.random() * (raw.length));
      element = raw[index];
      element.name('Edited!');
    }, 5000);
  });

  </script>
</body>
</html>
